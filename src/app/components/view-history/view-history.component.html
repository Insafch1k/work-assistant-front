<div class="history-container">
  <h1>История просмотров</h1>
  
  <div class="empty-history" *ngIf="viewHistory.length === 0">
    <p>У вас пока нет просмотренных вакансий</p>
  </div>
  
  <div *ngFor="let vacancy of viewHistory" class="vacancy-container">
    <div class="vacancy-card">
        <div class="description-like">
            <h2>{{ vacancy.title }}</h2>
            <div class="card-icons">
                <!-- сердечко для избранного для соискателей-->
                <svg 
                *ngIf="!isEmployer()"
                (click)="toggleFavorite(vacancy)"
                [class.favorited]="vacancy.isFavorite"
                width="20" 
                height="20" 
                viewBox="0 0 20 20" 
                xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.8925 10.9516L11.1783 15.6666C10.8658 15.9791 10.4419 16.1546 10 16.1546C9.55806 16.1546 9.13422 15.9791 8.82167 15.6666L4.1075 10.9525C3.71781 10.5662 3.40826 10.1067 3.19661 9.60048C2.98496 9.09423 2.8754 8.55116 2.87419 8.00245C2.87299 7.45374 2.98018 6.9102 3.18961 6.40303C3.39904 5.89586 3.70658 5.43505 4.09457 5.04705C4.48257 4.65905 4.94338 4.35151 5.45055 4.14209C5.95772 3.93266 6.50127 3.82547 7.04997 3.82667C7.59868 3.82787 8.14175 3.93744 8.648 4.14909C9.15425 4.36073 9.61371 4.67029 10 5.05998C10.7846 4.29487 11.8391 3.8697 12.935 3.87657C14.0309 3.88343 15.08 4.32179 15.855 5.09667C16.63 5.87155 17.0685 6.92056 17.0755 8.01646C17.0825 9.11236 16.6575 10.1669 15.8925 10.9516Z" stroke="white" stroke-width="1.5" fill="none"/>
                </svg>
                <!-- срочная вакансия -->
                <svg *ngIf="vacancy.is_urgent" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3.75 10.625L10.625 1.875V9.375H15L8.125 18.125V10.625H3.75Z" fill="#FFF024"/>
                </svg>
                <!-- авто -->
                <svg *ngIf="vacancy.car === true || vacancy.car === 'true'" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11.6667 4.16666C11.8824 4.16665 12.0897 4.25029 12.245 4.39999L12.3175 4.47916L15.4 8.33332H15.8333C16.471 8.33329 17.0846 8.57693 17.5486 9.01439C18.0125 9.45186 18.2918 10.0501 18.3292 10.6867L18.3333 10.8333V14.1667C18.3333 14.3877 18.2455 14.5996 18.0893 14.7559C17.933 14.9122 17.721 15 17.5 15H16.5242C16.3517 15.4874 16.0323 15.9093 15.6102 16.2077C15.188 16.5061 14.6837 16.6663 14.1667 16.6663C13.6497 16.6663 13.1454 16.5061 12.7232 16.2077C12.301 15.9093 11.9817 15.4874 11.8092 15H8.19084C8.01832 15.4874 7.699 15.9093 7.27682 16.2077C6.85463 16.5061 6.35034 16.6663 5.83334 16.6663C5.31634 16.6663 4.81204 16.5061 4.38986 16.2077C3.96767 15.9093 3.64835 15.4874 3.47584 15H2.50001C2.27899 15 2.06703 14.9122 1.91075 14.7559C1.75447 14.5996 1.66667 14.3877 1.66667 14.1667V9.16666L1.67251 9.06916L1.67917 9.02249L1.69334 8.95749L1.70334 8.92749L1.71501 8.88582L3.39334 4.69082C3.45512 4.53619 3.56181 4.40361 3.69965 4.31018C3.83748 4.21675 4.00015 4.16676 4.16667 4.16666H11.6667ZM5.83334 13.3333C5.61232 13.3333 5.40036 13.4211 5.24408 13.5774C5.0878 13.7337 5.00001 13.9456 5.00001 14.1667C5.00001 14.3877 5.0878 14.5996 5.24408 14.7559C5.40036 14.9122 5.61232 15 5.83334 15C6.05435 15 6.26631 14.9122 6.42259 14.7559C6.57887 14.5996 6.66667 14.3877 6.66667 14.1667C6.66667 13.9456 6.57887 13.7337 6.42259 13.5774C6.26631 13.4211 6.05435 13.3333 5.83334 13.3333ZM14.1667 13.3333C13.9457 13.3333 13.7337 13.4211 13.5774 13.5774C13.4211 13.7337 13.3333 13.9456 13.3333 14.1667C13.3333 14.3877 13.4211 14.5996 13.5774 14.7559C13.7337 14.9122 13.9457 15 14.1667 15C14.3877 15 14.5996 14.9122 14.7559 14.7559C14.9122 14.5996 15 14.3877 15 14.1667C15 13.9456 14.9122 13.7337 14.7559 13.5774C14.5996 13.4211 14.3877 13.3333 14.1667 13.3333ZM9.16667 5.83332H4.73001L3.73 8.33332H9.16667V5.83332ZM11.2667 5.83332H10.8333V8.33332H13.2667L11.2667 5.83332Z" fill="#FF2A69"/>
                </svg>
            </div>
        </div>
        <div class="payment">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8.51852 15.7143V10.7143M8.51852 10.7143V4.28571H11.2302C13.0054 4.28571 14.4444 5.72479 14.4444 7.49999V7.49999C14.4444 9.27519 13.0054 10.7143 11.2302 10.7143H8.51852Z" stroke="white" stroke-width="1.5"/>
                <path d="M12.5926 13.5714H5.92593" stroke="white"/>
                <path d="M11.4815 10.7143H5.92593" stroke="white"/>
            </svg>
            <p>{{ vacancy.salary }}р.</p>
        </div>
        <div class="hours">

            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_156_102)">
                <path d="M10 18.3334C14.6024 18.3334 18.3333 14.6024 18.3333 10C18.3333 5.39765 14.6024 1.66669 10 1.66669C5.39763 1.66669 1.66667 5.39765 1.66667 10C1.66667 14.6024 5.39763 18.3334 10 18.3334Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M7.91667 7.91669L10.8333 10.8334M13.3333 6.66669L9.16667 10.8334" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </g>
                <defs>
                <clipPath id="clip0_156_102">
                <rect width="20" height="20" fill="white"/>
                </clipPath>
                </defs>
            </svg>

            <p>{{ vacancy.time_hours }} ч.</p>

        </div>
        <div class="address-rating-avatar">

            <div class="address-container">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.5 9.16669C7.5 9.82973 7.76339 10.4656 8.23223 10.9345C8.70107 11.4033 9.33696 11.6667 10 11.6667C10.663 11.6667 11.2989 11.4033 11.7678 10.9345C12.2366 10.4656 12.5 9.82973 12.5 9.16669C12.5 8.50365 12.2366 7.86776 11.7678 7.39892C11.2989 6.93008 10.663 6.66669 10 6.66669C9.33696 6.66669 8.70107 6.93008 8.23223 7.39892C7.76339 7.86776 7.5 8.50365 7.5 9.16669Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M14.7142 13.8808L11.1783 17.4167C10.8658 17.7289 10.4422 17.9042 10.0004 17.9042C9.55868 17.9042 9.13501 17.7289 8.8225 17.4167L5.28583 13.8808C4.35352 12.9485 3.71861 11.7606 3.4614 10.4674C3.2042 9.17419 3.33624 7.83376 3.84083 6.61561C4.34543 5.39745 5.19991 4.35628 6.29623 3.62376C7.39255 2.89123 8.68147 2.50024 10 2.50024C11.3185 2.50024 12.6074 2.89123 13.7038 3.62376C14.8001 4.35628 15.6546 5.39745 16.1592 6.61561C16.6638 7.83376 16.7958 9.17419 16.5386 10.4674C16.2814 11.7606 15.6465 12.9485 14.7142 13.8808Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <p>{{ vacancy.address }}</p>
            </div>

            <div class="rating-container">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_156_105)">
                    <path d="M7.6275 4.50669C8.68334 2.61335 9.21084 1.66669 10 1.66669C10.7892 1.66669 11.3167 2.61335 12.3725 4.50669L12.6458 4.99669C12.9458 5.53502 13.0958 5.80419 13.3292 5.98169C13.5625 6.15919 13.8542 6.22502 14.4375 6.35669L14.9675 6.47669C17.0175 6.94085 18.0417 7.17252 18.2858 7.95669C18.5292 8.74002 17.8308 9.55752 16.4333 11.1917L16.0717 11.6142C15.675 12.0784 15.4758 12.3109 15.3867 12.5975C15.2975 12.885 15.3275 13.195 15.3875 13.8142L15.4425 14.3784C15.6533 16.5592 15.7592 17.6492 15.1208 18.1334C14.4825 18.6175 13.5225 18.1759 11.6042 17.2925L11.1067 17.0642C10.5617 16.8125 10.2892 16.6875 10 16.6875C9.71084 16.6875 9.43834 16.8125 8.89334 17.0642L8.39667 17.2925C6.4775 18.1759 5.5175 18.6175 4.88 18.1342C4.24084 17.6492 4.34667 16.5592 4.5575 14.3784L4.6125 13.815C4.6725 13.195 4.7025 12.885 4.6125 12.5984C4.52417 12.3109 4.325 12.0784 3.92834 11.615L3.56667 11.1917C2.16917 9.55835 1.47084 8.74085 1.71417 7.95669C1.9575 7.17252 2.98334 6.94002 5.03334 6.47669L5.56334 6.35669C6.14584 6.22502 6.43667 6.15919 6.67084 5.98169C6.905 5.80419 7.05417 5.53502 7.35417 4.99669L7.6275 4.50669Z" stroke="white" stroke-width="1.5"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_156_105">
                    <rect width="20" height="20" fill="white"/>
                    </clipPath>
                    </defs>
                </svg>

                <p>{{ vacancy.rating }}</p>

            </div>

            <img 
            [routerLink]="!isEmployer() ? ['/app/employers', vacancy.employer_id] : null"
            src="assets/images/user-avatar.png" 
            alt="Аватар"
            style="cursor:pointer">

        </div>
    </div>
    
    <div *ngIf="!isEmployer()" class="buttons-container">
        <!-- написать -->
        <svg (click)="writeEmployer(vacancy)" style="cursor: pointer;" width="75" height="40" viewBox="0 0 75 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="75" height="40" rx="15" fill="#6849FF"/>
            <path d="M38.0769 28.0563C39.6703 28.0563 41.2279 27.5838 42.5528 26.6986C43.8776 25.8133 44.9102 24.5551 45.52 23.083C46.1297 21.6109 46.2893 19.9911 45.9784 18.4283C45.6676 16.8655 44.9003 15.4301 43.7736 14.3034C42.6469 13.1767 41.2114 12.4094 39.6486 12.0985C38.0859 11.7877 36.466 11.9472 34.9939 12.557C33.5218 13.1667 32.2636 14.1993 31.3784 15.5242C30.4931 16.849 30.0206 18.4066 30.0206 20C30.0206 21.289 30.3232 22.5064 30.8621 23.5869C31.2676 24.4023 30.7036 25.5025 30.4888 26.3054C30.4412 26.483 30.4412 26.67 30.4888 26.8476C30.5363 27.0252 30.6298 27.1871 30.7598 27.3171C30.8898 27.4471 31.0518 27.5406 31.2294 27.5882C31.407 27.6358 31.5939 27.6357 31.7715 27.5882C32.5745 27.3733 33.6746 26.8094 34.4901 27.2158C35.6047 27.7692 36.8324 28.0569 38.0769 28.0563Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <!-- позвонить -->
        <svg (click)="callEmployer(vacancy)" style="cursor: pointer;" width="75" height="40" viewBox="0 0 75 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="75" height="40" rx="15" fill="#6849FF"/>
            <path d="M34.4963 11.9437C34.9439 11.9437 36.7342 15.9719 36.7342 16.4194C36.7342 17.3146 35.3915 18.2097 34.9439 19.1049C34.4963 20 35.3915 20.8952 36.2866 21.7903C36.6357 22.1394 38.0769 23.5806 38.972 23.133C39.8672 22.6854 40.7623 21.3427 41.6575 21.3427C42.1051 21.3427 46.1332 23.133 46.1332 23.5806C46.1332 25.3709 44.7905 26.7136 43.4478 27.1612C42.1051 27.6087 41.2099 27.6087 39.4196 27.1612C37.6293 26.7136 36.2866 26.266 34.0488 24.0282C31.8109 21.7903 31.3633 20.4476 30.9158 18.6573C30.4682 16.867 30.4682 15.9719 30.9158 14.6292C31.3633 13.2864 32.706 11.9437 34.4963 11.9437Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>  
        <button class="btn-details" [routerLink]="['/app/jobs', vacancy.job_id, 'seeall']">Подробнее</button>
    </div>

  </div>
</div>