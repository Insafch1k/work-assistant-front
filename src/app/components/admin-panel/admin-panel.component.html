<div class="admin-panel-container">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <div class="admin-header">
    <button class="back-btn" (click)="goBack()">
      –ù–∞–∑–∞–¥
    </button>
    <h1>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h1>
  </div>

  <!-- –ë–ª–æ–∫ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ -->
  <div class="metrics-section">
    <div class="section-header" (click)="toggleMetrics()">
      <h2>–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏</h2>
      <span class="arrow" [class.rotated]="metricsExpanded">‚ñº</span>
    </div>
    
    <div class="metrics-content" [class.expanded]="metricsExpanded" *ngIf="metrics">
      <div class="period-select">
        <label>–ü–µ—Ä–∏–æ–¥: </label>
        <select [ngModel]="selectedWindow" (ngModelChange)="onWindowChange($event)">
          <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
          <option value="yesterday">–í—á–µ—Ä–∞</option>
          <option value="7d">–ó–∞ 7 –¥–Ω–µ–π</option>
          <option value="30d">–ó–∞ 30 –¥–Ω–µ–π</option>
        </select>
      </div>
      
      <div class="metrics-grid">
        <div class="metric-card">
          <div class="metric-icon">üôÇ</div>
          <div class="metric-content">
            <h3>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
            <p class="metric-value">{{ formatNumber(metrics.registeredUsers || 0) }}</p>
          </div>
        </div>

        <div class="metric-card">
          <div class="metric-icon">‚ö°</div>
          <div class="metric-content">
            <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
            <p class="metric-value">{{ formatNumber(metrics.activeUsers || 0) }}</p>
          </div>
        </div>

        <div class="metric-card">
          <div class="metric-icon">üìù</div>
          <div class="metric-content">
            <h3>–ù–æ–≤—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏</h3>
            <p class="metric-value">{{ formatNumber(metrics.newVacancies || 0) }}</p>
          </div>
        </div>

        <div class="metric-card">
          <div class="metric-icon">üì§</div>
          <div class="metric-content">
            <h3>–û—Ç–∫–ª–∏–∫–∏</h3>
            <p class="metric-value">{{ formatNumber(metrics.responsesCount || 0) }}</p>
          </div>
        </div>

        <div class="metric-card">
          <div class="metric-icon">üìà</div>
          <div class="metric-content">
            <h3>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –æ—Ç–∫–ª–∏–∫–æ–≤</h3>
            <p class="metric-value">{{ (metrics.responseRate || 0).toFixed(2) }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- –ë–ª–æ–∫ –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è -->
  <div class="moderation-section">
    <div class="section-header" (click)="toggleModeration()">
      <h2>–ú–æ–¥–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
      <span class="arrow" [class.rotated]="moderationExpanded">‚ñº</span>
    </div>
    
    <div class="users-block" *ngIf="moderationExpanded">
      <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h3>
      
      <div class="search-container">
        <input 
          type="text" 
          placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è..."
          [(ngModel)]="userSearchTerm"
          (keyup.enter)="onUserSearch()">
        <button (click)="onUserSearch()">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17.5 17.5L13.8808 13.8808M13.8808 13.8808C14.4999 13.2617 14.991 12.5268 15.326 11.7179C15.6611 10.9091 15.8335 10.0422 15.8335 9.16666C15.8335 8.29115 15.6611 7.42422 15.326 6.61537C14.991 5.80651 14.4999 5.07156 13.8808 4.45249C13.2618 3.83342 12.5268 3.34234 11.718 3.0073C10.9091 2.67226 10.0422 2.49982 9.16667 2.49982C8.29116 2.49982 7.42424 2.67226 6.61538 3.0073C5.80652 3.34234 5.07157 3.83342 4.4525 4.45249C3.20223 5.70276 2.49983 7.3985 2.49983 9.16666C2.49983 10.9348 3.20223 12.6305 4.4525 13.8808C5.70277 15.1311 7.39851 15.8335 9.16667 15.8335C10.9348 15.8335 12.6306 15.1311 13.8808 13.8808Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>

      <div class="users-list" *ngIf="!usersLoading">
        <div class="user-card" *ngFor="let user of users">
          <div class="user-info">
            <h4>{{ user.user_name }}</h4>
            <p><strong>–†–æ–ª—å:</strong> {{ user.user_role === 'employer' ? '–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å' : '–°–æ–∏—Å–∫–∞—Ç–µ–ª—å' }}</p>
            <p><strong>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:</strong> {{ user.created_at | date:'dd.MM.yyyy HH:mm' }}</p>
            <p><strong>–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥:</strong> {{ user.last_login_at | date:'dd.MM.yyyy HH:mm' }}</p>
            <p><strong>USER_ID:</strong> {{ user.user_id }}</p>
            <p><strong>TG_ID:</strong> {{ user.tg }}</p>
            <p><strong>TG_USERNAME:</strong> {{ user.tg_username || '–ù–µ —É–∫–∞–∑–∞–Ω' }}</p>
            <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ user.phone || '–ù–µ —É–∫–∞–∑–∞–Ω' }}</p>
            <p><strong>–†–µ–π—Ç–∏–Ω–≥:</strong> {{ user.rating }}</p>
            
            <!-- <span class="status" [class.banned]="user.status === 'banned'">
              {{ user.status === 'banned' ? '–ó–∞–±–∞–Ω–µ–Ω' : '–ê–∫—Ç–∏–≤–µ–Ω' }}
            </span> -->
            <div class="status-row">
              <span class="status" [class.admin]="user.is_admin" [class.user]="!user.is_admin">
                {{ user.is_admin ? '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' : '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å' }}
              </span>
              <!-- <span class="status" [class.active]="user.status !== 'banned'" [class.banned]="user.status === 'banned'">
                {{ user.status === 'banned' ? '–ó–∞–±–∞–Ω–µ–Ω' : '–ê–∫—Ç–∏–≤–µ–Ω' }}
              </span> -->
            </div>
            
          </div>
          <!-- <button 
            class="action-btn" 
            [class.ban]="user.status === 'active'"
            [class.unban]="user.status === 'banned'"
            (click)="user.status === 'active' ? banUser(user) : unbanUser(user)">
            {{ user.status === 'active' ? '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å' : '–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å' }}
          </button> -->
          <button class="action-btn">–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç</button>
        </div>
      </div>

      <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
      <div class="pagination" *ngIf="false">
        <button 
          (click)="loadUsers(currentUserPage - 1)">
          ‚Üê
        </button>
        
        <span 
          *ngFor="let page of getUserPages()"
          class="page-number"
          [class.active]="page === currentUserPage"
          (click)="loadUsers(page)">
          {{ page }}
        </span>
        
        <button 
          (click)="loadUsers(currentUserPage + 1)">
          ‚Üí
        </button>
      </div>
    </div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
<!-- <div class="modal-overlay" *ngIf="showDeleteConfirm" (click)="closeDeleteConfirm()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
    <p>
      –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ 
      <span *ngIf="itemToDelete?.type === 'user'">–∑–∞–±–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</span>
      <span *ngIf="itemToDelete?.type === 'vacancy'">—É–¥–∞–ª–∏—Ç—å –≤–∞–∫–∞–Ω—Å–∏—é</span>
      <strong>"{{ itemToDelete?.name }}"</strong>?
    </p>
    <div class="modal-actions">
      <button class="btn-cancel" (click)="closeDeleteConfirm()">–û—Ç–º–µ–Ω–∞</button>
      <button class="btn-confirm" (click)="confirmDelete()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
    </div>
  </div>
</div> -->